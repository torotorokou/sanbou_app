# ============================
# 基本ルール / OS / エディタ
# ============================
# Git 内部ディレクトリ（Explorer非表示推奨、必要なら一時的に表示）
.git/

.DS_Store
Thumbs.db
.vscode/
!.vscode/extensions.json
.idea/
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?


# JetBrains 等派生
.fleet/

# ============================
# Pre-commit / Git Hooks
# ============================
# Pre-commit キャッシュとログ
.pre-commit.log

# Secrets baseline（追跡する）
!.secrets.baseline

# ============================
# Node.js / Frontend Build
# ============================
node_modules/
dist/
dist-ssr/
build/
.cache/
.vite/
.next/
out/
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*
*.tsbuildinfo

# ============================
# Python / パッケージ成果物
# ============================
__pycache__/
*.py[cod]
*.pyo
*.pyd
*.pyc
*.egg
*.egg-info/
.eggs/
.mypy_cache/
.pytest_cache/
.tox/
.dmypy.json
.pyre/
.ruff_cache/
.pytype/
.coverage
.coverage.*
htmlcov/
pip-log.txt
pip-delete-this-directory.txt
.Python
.python-version

# 仮想環境（Python venv）
# 注意: env/ は環境変数ディレクトリとして使用するため、
#       仮想環境は .venv/ を使用してください
.env/
.venv/
venv/
ENV/

# ============================
# アプリ / DB ランタイム
# ============================
*.db
*.sqlite3

# ============================
# 環境変数・Secrets
# ============================
# 【重要】env/ と secrets/ ディレクトリ内の全ファイルを除外
# テンプレートファイルのみ許可し、実際の設定ファイルは全て Git 管理外とする

# env/ ディレクトリ: 全ファイル除外
/env/
!env/.env.example
!env/*.template
!env/README.md

# secrets/ ディレクトリ: 全ファイル除外
/secrets/
!secrets/.env.secrets.template
!secrets/*.template
!secrets/README.md

# ルートの .env ファイルも除外（念のため）
.env
.env.*
!.env.example

# ops/maintenance/ の .env ファイル（メンテナンスページ設定）
/ops/maintenance/.env
!/ops/maintenance/.env.example

# 証明書と秘密鍵（全階層）
*.pem
*.key
*.crt
*.p12
*.pfx

# SSH 鍵
id_rsa
id_ed25519
*.pem.key

# ============================
# Docker / Compose
# ============================
*.local
docker-compose.override.yml
docker-compose.local.yml

# Docker build cache
.docker/

# Docker volumes
docker-volumes/


# ============================
# データ / バックアップ
# data, local_data は原則除外。テンプレ / マスタ許可
# ============================
dbdata/
pg_data/
postgres_data/
data/postgres/
data/postgres_v17/
*.pgsql
*.psql
*.dump
*.backup
*.sql.gz

**/local_data/
# **/data/
!**/data/templates/**
!**/data/master/**
/app/frontend/src/data/

# local_data/master 内でコード参照される設定 (yaml / json) は許可
!**/local_data/master/**/*.yaml
!**/local_data/master/**/*.yml
!**/local_data/master/**/*.json
# 必要に応じて PDF など大きなバイナリを追跡したい場合は以下のコメント解除
# !**/local_data/master/**/*.pdf

# Backup files
backups/
*.bak
*.backup.*
*.tmp
*.out
*.pid
*.pid.lock
*.zip
*.tar.gz

# ============================
# ログ / レポート / カバレッジ
# ============================
logs/
**/logs/
coverage/
# reports/
*.report.*

# API specific generated files
**/report_artifacts/
**/api/logs/
**/st_app/logs/
**/st_app/report_artifacts/

# ============================
# ドキュメント系バイナリ
# ============================
*.pdf
*.docx
*.pptx
*.xlsx
*.Identifier
*:Zone.Identifier

# ============================
# Nginx
# ============================
nginx/logs/
nginx/cache/
*.conf.bak
*.conf.tmp

# ============================
# YAML / JSON / CSV 管理方針
# ============================
# 原則: 設定・マスター・テンプレートファイルは追跡、生成データは除外

# --- グローバル除外（生成ファイル・ランタイムデータ） ---
*.yaml
# *.yml
# *.json
# *.csv (まず除外、後で明示許可)

# 大きなディレクトリを先に除外
data/
**/data/
/app/frontend/src/data/

# --- 明示除外: テストデータ（masterより先に） ---
test/**/*.csv
**/test/**/*.csv

# --- 明示許可: Node.js / Docker / Config ---
!package.json
!**/package.json
!package-lock.json
!**/package-lock.json
!pnpm-lock.yaml
!**/pnpm-lock.yaml
!yarn.lock
!**/yarn.lock

!docker/docker-compose.yml
!docker/docker-compose.dev.yml
!docker/docker-compose.stg.yml
!docker/docker-compose.prod.yml

# --- 明示許可: config ディレクトリ（設定ファイル） ---
!config/**
!**/config/**
!config/**/*.json
!config/**/*.yaml
!config/**/*.yml
!config/**/*.csv
!**/config/**/*.json
!**/config/**/*.yaml
!**/config/**/*.yml
!**/config/**/*.csv

# --- 明示許可: master ディレクトリ（マスターデータ） ---
!**/master/**
!**/master/**/*.csv
!**/master/**/*.json
!**/master/**/*.yaml
!**/master/**/*.yml

# --- 明示許可: templates ディレクトリ（テンプレートファイル） ---
!**/templates/**
!**/templates/**/*.xlsx
!**/templates/**/*.csv
!**/templates/**/*.json

# --- 明示除外: テストデータ・動的生成・大容量データ ---
test/**/*.csv
**/test/**/*.csv

# data配下は除外済みだが、local_data/master内の設定のみ許可
**/local_data/
!**/local_data/master/**/*.yaml
!**/local_data/master/**/*.yml
!**/local_data/master/**/*.json

# ============================
# RAG / ベクターストア / AI
# ============================
*.faiss
*.ann
vector_store/
cache_embeddings/

# AI/ML model cache
**/.cache/
**/model_cache/
**/embeddings_cache/

# ============================
# 追加で無視したいものがあればこの下に
# ============================

# 誤って混入しやすい資格情報 (既に secrets/ は除外済だがコピー漏れ対策)
**/gcp-sa.json
**/gcs-key*.json

# (EOF)
app/nginx/certs/*

*.mp4

# Exclude specific local config templates (tracked config allowed elsewhere)
# These files contain local or sensitive content and should not be committed
category_question_templates_with_tags.yaml
category_question_templates.yaml

!*notifications.openapi.yaml

recovery

*/backend/manual_api/data/
