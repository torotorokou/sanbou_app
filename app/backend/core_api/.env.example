# Core API Environment Variables

# ============================================================================
# Database Connection Settings
# ============================================================================
# 
# 推奨設定方法（新規）:
#   DB_USER, DB_PASSWORD, DB_NAME, DB_HOST, DB_PORT を個別に設定
#
# 代替方法:
#   DATABASE_URL を直接設定（例: postgresql://user:pass@host:5432/dbname）
#
# 後方互換性:
#   POSTGRES_USER, POSTGRES_PASSWORD, POSTGRES_DB も引き続きサポート
# ============================================================================

# アプリケーション実行用のDB接続設定（推奨）
DB_USER=sanbou_app_dev
DB_PASSWORD=<SET_IN_SECRETS_FILE>
DB_NAME=sanbou_dev
DB_HOST=db
DB_PORT=5432

# マイグレーション専用のDB接続設定（オプション）
# 設定しない場合は DB_USER にフォールバックします
# DDL権限が必要なマイグレーションで使用
# DB_MIGRATOR_USER=sanbou_migrator_dev
# DB_MIGRATOR_PASSWORD=<SET_IN_SECRETS_FILE>

# 代替方法: DATABASE_URL を直接設定（上記の設定より優先されます）
# DATABASE_URL=postgresql://sanbou_app_dev:<PASSWORD>@db:5432/sanbou_dev

# 後方互換性: POSTGRES_* 環境変数（非推奨、将来削除予定）
# DB_USER が未設定の場合のみ使用されます
# POSTGRES_USER=sanbou_app_dev
# POSTGRES_PASSWORD=<PASSWORD>
# POSTGRES_DB=sanbou_dev
# POSTGRES_HOST=db
# POSTGRES_PORT=5432

# CSV Upload Settings
CSV_UPLOAD_MAX_SIZE=10485760  # 10MB
CSV_TEMP_DIR=/tmp/csv_uploads

# YAML Configuration Path (container path)
CSV_MASTERS_YAML_PATH=/backend/config/csv_config/shogun_csv_masters.yaml

# Shogun CSV Table Mapping (変更可能)
SHOGUN_CSV_SCHEMA=raw
RECEIVE_TABLE_NAME=shogun_flash_receive
YARD_TABLE_NAME=shogun_flash_yard
SHIPMENT_TABLE_NAME=shogun_flash_shipment

# API Endpoints (other services)
LEDGER_API_BASE=http://ledger_api:8002
MANUAL_API_BASE=http://manual_api:8003
AI_API_BASE=http://ai_api:8004
RAG_API_BASE=http://rag_api:8005

# Authentication Settings
# AUTH_MODE: Authentication provider mode
#   - "dev": Development mode (fixed dev user, no authentication check)
#   - "iap": Google Cloud IAP mode (requires IAP headers)
# Default: dev (for local development)
# Production: Should be set to "iap" when IAP is enabled
AUTH_MODE=dev

