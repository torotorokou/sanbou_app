## =============================================================
## docker-compose.prod.yml (本番環境 Override)
## - 外部公開は nginx のみ (80/443)
## - frontend/backend は内部ネットワークのみ
## - ログやボリューム永続化は必要に応じて追記
## =============================================================
services:
  # frontend サービスは dev プロファイル限定 (base compose 参照)。prod では起動しない。
  ai_api:
    env_file:
      - ../env/.env.prod

  ledger_api:
    env_file:
      - ../env/.env.prod

  sql_api:
    env_file:
      - ../env/.env.prod

  rag_api:
    env_file:
      - ../env/.env.prod

  nginx:
    ports:
      - "80:80"
      - "443:443"
    environment:
      STAGE: prod
