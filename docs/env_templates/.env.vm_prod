###############################################
# .env.vm_prod (GCP VM 本番環境) 旧: .env.prod
# - 変数値は旧ファイルから移行
###############################################

APP_TAG=prod
STAGE=prod
NODE_ENV=production
PUBLIC_BASE_URL=https://sanbou-app.jp

# === Security / Authentication ===
# 本番環境: IAP 必須、DEBUG 必ず無効
DEBUG=false
IAP_ENABLED=true
# IAP_AUDIENCE は GCP プロジェクト設定後に設定
# 例: /projects/PROJECT_NUMBER/global/backendServices/SERVICE_ID
IAP_AUDIENCE=

# === DB ===
# 【DB ユーザー分離対応】
# POSTGRES_USER / POSTGRES_PASSWORD / DATABASE_URL は secrets/.env.vm_prod.secrets に記載してください
# 推奨: sanbou_app_prod ユーザーを使用（scripts/sql/20251204_create_app_db_users.sql 参照）
#
# 注意: DATABASE_URL はパスワードを含むため、必ず secrets/ ファイルで設定してください
#       ここで設定すると Git にパスワードが記録されます
POSTGRES_DB=sanbou_prod

# === GCP 認証 (ADC) ===
# Application Default Credentials を使用
# GCE VM にサービスアカウントをアタッチしてください
# GOOGLE_APPLICATION_CREDENTIALS 環境変数は不要です

# === RAG (rag_api) ===
# 本番環境では RAG_GCS_URI を空にして GCS 同期を無効化
RAG_GCS_URI=

# === ledger_api 同期 ===
# STARTUP_DOWNLOAD_ENABLE 空=自動同期
STARTUP_DOWNLOAD_ENABLE=
STRICT_STARTUP=false
GCS_LEDGER_BUCKET=
GCS_LEDGER_BUCKET_DEV=gs://sanbouapp-dev/ledger_api/st_app
GCS_LEDGER_BUCKET_STG=gs://sanbouapp-stg/ledger_api/st_app
GCS_LEDGER_BUCKET_PROD=gs://sanbouapp-prod/ledger_api/st_app

# === Forecast Worker Settings ===
# 本番環境では長い間隔でポーリング（.env.commonのデフォルトを上書き）
POLL_INTERVAL=10

# === メモ ===
# ・内部API URL (RAG_API_BASE等) は .env.common から継承
# ・本番環境では TLS 必須
