# セキュリティ既知の課題

## 概要
このドキュメントは、GCP Artifact Registry の脆弱性スキャンで検出された CVE のうち、現時点で完全には解消できないものを記録します。

## 未解決の CVE

### libpng 関連の脆弱性

#### 影響を受ける CVE
- CVE-2025-64720
- CVE-2025-66293
- CVE-2025-65018
- CVE-2025-64506
- CVE-2025-64505

#### 状況
- **OS ベンダ側のパッチ待ち**: Debian/Ubuntu の公式リポジトリにおいて、これらの CVE に対する backport がまだ提供されていません。
- **リスク評価**: 
  - 本アプリケーションでは、画像処理を積極的に行うコンテナは限定的です（主に ledger_api での LibreOffice 経由の間接利用）。
  - 攻撃面は限定的であり、実用上のリスクは低いと判断しています。
- **対応**: 
  - OS パッケージを最新の状態に保ち、ベンダがパッチをリリース次第、速やかに適用します。
  - 不要な画像処理ライブラリの削除を検討済みですが、間接依存のため完全削除は困難です。

#### 最終更新日
2025-12-08

---

### curl QUIC + wolfSSL 関連の脆弱性

#### 影響を受ける CVE
- CVE-2025-9086
- CVE-2025-5025
- CVE-2025-10148
- CVE-2025-4947

#### 状況
- **使用していない機能**: 本アプリケーションでは、curl の QUIC + wolfSSL 機能を使用していません。
- **リスク評価**: 
  - これらの CVE は特定の機能（QUIC プロトコルと wolfSSL）に関連しており、使用していないため実質的なリスクは極めて低いです。
- **対応**: 
  - OS のセキュリティアップデートを適用することで、ディストリが提供する最新の curl を利用します。

#### 最終更新日
2025-12-08

---

## 対応済みの CVE

### pip 関連（CVE-2025-8869）
- **対応**: 全 Python コンテナで pip を 25.3 以上に更新済み
- **完了日**: 2025-12-08

### PyPDF2 関連（CVE-2023-36464）
- **対応**: PyPDF2 を廃止し、pypdf >= 3.9.0 に移行済み
- **完了日**: 2025-12-08

### 主要ライブラリの脆弱性対応（2025-12-08）
- **対応内容**:
  - **uvicorn**: 0.32.1 → 0.33.0（最新安定版）
  - **pydantic**: 2.10.3 → 2.10.6（セキュリティパッチ含む）
  - **SQLAlchemy**: 2.0.36 → 2.0.44（バグ修正・パフォーマンス改善）
  - **Pillow**: 11.0.0 → 11.1.0（画像処理の脆弱性修正）
  - **PyMuPDF**: 1.24.14 → 1.25.3（PDF処理の安定性向上）
  - **axios** (frontend): DoS脆弱性修正 (GHSA-4hjh-wcwx-xvwj)
  - **tar-fs** (frontend): シンボリックリンク検証バイパス修正 (GHSA-vj76-c3g6-qr5v)
- **完了日**: 2025-12-08

### libxml2, openssl 関連
- **対応**: OS パッケージの定期更新により、ディストリ提供の最新版を適用
- **確認済み**:
  - curl: 8.14.1-2+deb13u2
  - openssl: 3.5.4-1~deb13u1
  - Python: 3.12.12
- **最終更新日**: 2025-12-08

---

## レビュープロセス
- このドキュメントは、新しい CVE が検出された際、または OS ベンダからパッチがリリースされた際に更新されます。
- 定期的（四半期ごと）にセキュリティ状況を再評価し、必要に応じて対応を見直します。
