# Phase 4 Step 5: Manualæ©Ÿèƒ½ã®ç§»è¡Œ

**ä½œæˆæ—¥**: 2025-01-05  
**Phase**: 4  
**Step**: 5  
**æ‹…å½“**: Migration Team

---

## ğŸ“‹ æ¦‚è¦

**ç›®çš„**: Manualæ©Ÿèƒ½ã‚’Feature-Sliced Designæ§‹é€ ã«å®Œå…¨ç§»è¡Œ

**èƒŒæ™¯**: 
- Phase 4ã§Reportæ©Ÿèƒ½ã¨Databaseæ©Ÿèƒ½ã®ç§»è¡Œã‚’å®Œäº†
- Manualæ©Ÿèƒ½ã¯ãƒãƒ‹ãƒ¥ã‚¢ãƒ«æ¤œç´¢ãƒ»è¡¨ç¤ºãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’æä¾›
- ä¸»ã«APIã‚µãƒ¼ãƒ“ã‚¹ã¨å‹å®šç¾©ã§æ§‹æˆã•ã‚Œã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹é€ 

**ã‚¹ã‚³ãƒ¼ãƒ—**:
- APIã‚µãƒ¼ãƒ“ã‚¹ (1ãƒ•ã‚¡ã‚¤ãƒ«)
- å‹å®šç¾© (1ãƒ•ã‚¡ã‚¤ãƒ«)
- åˆè¨ˆ: 2ãƒ•ã‚¡ã‚¤ãƒ«

---

## ğŸ¯ ç›®æ¨™

### ä¸»è¦ç›®æ¨™
1. **å‹å®šç¾©ã®ç§»è¡Œ**: `types/manuals.ts` â†’ `features/manual/model/`
2. **APIã‚µãƒ¼ãƒ“ã‚¹ã®ç§»è¡Œ**: `services/api/manualsApi.ts` â†’ `features/manual/api/`
3. **å…¬é–‹APIä½œæˆ**: `features/manual/index.ts`
4. **ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼æ›´æ–°**: 4ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### å‰¯æ¬¡çš„ç›®æ¨™
- ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®ç¶­æŒ (< 10ç§’)
- å‹ã‚¨ãƒ©ãƒ¼0ä»¶
- æ˜ç¢ºãªAPIå¢ƒç•Œã®ç¢ºç«‹

---

## ğŸ“Š ç¾çŠ¶åˆ†æ

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

**ç¾åœ¨ã®é…ç½®**:
```
src/
â”œâ”€â”€ types/
â”‚   â””â”€â”€ manuals.ts                    # Manualå‹å®šç¾©
â””â”€â”€ services/
    â””â”€â”€ api/
        â””â”€â”€ manualsApi.ts             # Manual APIã‚µãƒ¼ãƒ“ã‚¹
```

**ç§»è¡Œå¾Œã®é…ç½®**:
```
src/features/manual/
â”œâ”€â”€ model/
â”‚   â””â”€â”€ manual.types.ts               # å‹å®šç¾©
â”œâ”€â”€ api/
â”‚   â””â”€â”€ manualsApi.ts                 # APIã‚µãƒ¼ãƒ“ã‚¹
â””â”€â”€ index.ts                          # å…¬é–‹API
```

### ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼åˆ†æ

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«** (4ãƒ•ã‚¡ã‚¤ãƒ«):
1. `pages/manual/ShogunManualList.tsx`
2. `pages/manual/ManualPage.tsx`
3. `pages/manual/GlobalManualSearch.tsx`
4. `pages/manual/ManualModal.tsx`

**ä¾å­˜é–¢ä¿‚**:
- `@shared/infrastructure/http` (apiGet)
- Manualå‹å®šç¾© (ManualDetail, ManualListResponseç­‰)

---

## ğŸ“ å®Ÿæ–½è¨ˆç”»

### Step 5-1: å‹å®šç¾©ã®ç§»è¡Œ âœ… (æœ€åˆ)

**ç†ç”±**: APIã‚µãƒ¼ãƒ“ã‚¹ãŒå‹å®šç¾©ã«ä¾å­˜

**ã‚¿ã‚¹ã‚¯**:
- [ ] `types/manuals.ts` ã‚’ `features/manual/model/manual.types.ts` ã«ã‚³ãƒ”ãƒ¼
- [ ] å†…å®¹ç¢ºèª (ä¾å­˜ãªã—æƒ³å®š)
- [ ] å…¬é–‹APIã«è¿½åŠ 
- [ ] ãƒ“ãƒ«ãƒ‰ç¢ºèª

**äºˆæƒ³æ™‚é–“**: 5åˆ†

---

### Step 5-2: APIã‚µãƒ¼ãƒ“ã‚¹ã®ç§»è¡Œ

**ç†ç”±**: Manualæ©Ÿèƒ½ã®ä¸­æ ¸

**ã‚¿ã‚¹ã‚¯**:
- [ ] `services/api/manualsApi.ts` ã‚’ `features/manual/api/manualsApi.ts` ã«ã‚³ãƒ”ãƒ¼
- [ ] ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ä¿®æ­£
  - `@/types/manuals` â†’ `@features/manual`
  - `@shared/infrastructure/http` ç¶­æŒ
- [ ] å…¬é–‹APIã«è¿½åŠ 
- [ ] ãƒ“ãƒ«ãƒ‰ç¢ºèª

**äºˆæƒ³æ™‚é–“**: 10åˆ†

---

### Step 5-3: ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼æ›´æ–°

**ã‚¿ã‚¹ã‚¯**:
- [ ] 4ã¤ã®ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ›´æ–°
  - `@/services/api/manualsApi` â†’ `@features/manual`
- [ ] ãƒ“ãƒ«ãƒ‰ç¢ºèª
- [ ] æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

**äºˆæƒ³æ™‚é–“**: 10åˆ†

---

### Step 5-4: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

**ã‚¿ã‚¹ã‚¯**:
- [ ] `PHASE4_STEP5_COMPLETION.md` ä½œæˆ
- [ ] `MIGRATION_STATUS.md` æ›´æ–°
- [ ] ã‚³ãƒŸãƒƒãƒˆ

**äºˆæƒ³æ™‚é–“**: 15åˆ†

---

## ğŸ” äºˆæƒ³ã•ã‚Œã‚‹èª²é¡Œ

### èª²é¡Œ1: å‹å®šç¾©ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**çŠ¶æ³**: è¤‡æ•°ã®å‹ãŒã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹

**å‹ã®ãƒªã‚¹ãƒˆ**:
- `ManualSectionChunk`
- `RagMetadata`
- `ManualSummary`
- `ManualDetail`
- `ManualListResponse`
- `ManualCatalogResponse` (manualsApi.tså†…)

**å¯¾ç­–**:
- ã™ã¹ã¦ã®å‹ã‚’å…¬é–‹APIã§re-export
- ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã§å¿…è¦ãªå‹ã‚’ç¢ºèª

**ãƒªã‚¹ã‚¯**: ä½

---

### èª²é¡Œ2: APIã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**çŠ¶æ³**: `export default manualsApi`

**å¯¾ç­–**:
- å…¬é–‹APIã§åå‰ä»˜ãã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤‰æ›
- ã¾ãŸã¯ä¸¡æ–¹ã‚µãƒãƒ¼ãƒˆ (default + named)

**ãƒªã‚¹ã‚¯**: ä½

---

### èª²é¡Œ3: ManualCatalogResponseã®æ‰€åœ¨

**çŠ¶æ³**: `ManualCatalogResponse`ãŒAPIãƒ•ã‚¡ã‚¤ãƒ«å†…ã«å®šç¾©

**å¯¾ç­–**:
- å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã«ç§»å‹•ã‚’æ¤œè¨
- ã¾ãŸã¯ç¾çŠ¶ç¶­æŒã§APIã‹ã‚‰å†ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**ãƒªã‚¹ã‚¯**: ä½

---

## âœ… æ¤œè¨¼è¨ˆç”»

### ãƒ“ãƒ«ãƒ‰æ¤œè¨¼
```bash
npm run build
# æœŸå¾…: ã‚¨ãƒ©ãƒ¼0ä»¶ã€è­¦å‘Šã¯æ—¢çŸ¥ã®ã‚‚ã®ã®ã¿
# ç›®æ¨™: < 10ç§’
```

### å‹ãƒã‚§ãƒƒã‚¯
```bash
npm run type-check  # ã¾ãŸã¯ tsc --noEmit
# æœŸå¾…: ã‚¨ãƒ©ãƒ¼0ä»¶
```

### æ©Ÿèƒ½æ¤œè¨¼
1. ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ä¸€è¦§è¡¨ç¤º
2. ãƒãƒ‹ãƒ¥ã‚¢ãƒ«è©³ç´°è¡¨ç¤º
3. ãƒãƒ‹ãƒ¥ã‚¢ãƒ«æ¤œç´¢
4. ã‚»ã‚¯ã‚·ãƒ§ãƒ³å–å¾—
5. ã‚«ã‚¿ãƒ­ã‚°è¡¨ç¤º

---

## ğŸ“¦ æœŸå¾…ã•ã‚Œã‚‹æˆæœç‰©

### ã‚³ãƒ¼ãƒ‰
1. `src/features/manual/` (å®Œå…¨ãªFSDæ§‹é€ )
2. `src/features/manual/index.ts` (å…¬é–‹API)
3. æ›´æ–°ã•ã‚ŒãŸ4ã¤ã®ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
1. `PHASE4_STEP5_COMPLETION.md`
2. æ›´æ–°ã•ã‚ŒãŸ `MIGRATION_STATUS.md`

### çµ±è¨ˆ
- ç§»è¡Œãƒ•ã‚¡ã‚¤ãƒ«æ•°: 2
- ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼æ›´æ–°: 4ãƒ•ã‚¡ã‚¤ãƒ«
- å…¬é–‹API: ~7ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ (å‹ + APIã‚µãƒ¼ãƒ“ã‚¹)
- æ¨å®šã‚³ãƒ¼ãƒ‰è¡Œæ•°: ~150è¡Œ

---

## ğŸ“ å‰å›ã®ç§»è¡Œã‹ã‚‰ã®å­¦ã³

### é©ç”¨ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

1. **æ®µéšçš„ç§»è¡Œ**:
   - å‹å®šç¾© â†’ APIã‚µãƒ¼ãƒ“ã‚¹ ã®é †
   - å„ã‚¹ãƒ†ãƒƒãƒ—ã§ãƒ“ãƒ«ãƒ‰ç¢ºèª

2. **ç›¸å¯¾ãƒ‘ã‚¹ vs çµ¶å¯¾ãƒ‘ã‚¹**:
   - åŒä¸€featureå†…: ç›¸å¯¾ãƒ‘ã‚¹
   - ä»–feature/shared: çµ¶å¯¾ãƒ‘ã‚¹

3. **å…¬é–‹API**:
   - å˜ä¸€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ (`index.ts`)
   - æ˜ç¢ºãªã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

### å‰å›ç§»è¡Œã¨ã®æ¯”è¼ƒ

| é …ç›® | Report | Database | Manual |
|------|--------|----------|--------|
| ãƒ•ã‚¡ã‚¤ãƒ«æ•° | 34 | 7 | 2 |
| è¤‡é›‘åº¦ | é«˜ | ä½ | éå¸¸ã«ä½ |
| æ‰€è¦æ™‚é–“ | 6æ™‚é–“ | 30åˆ† | 20åˆ†(äºˆæƒ³) |

---

## ğŸš€ å®Ÿè¡Œæ‰‹é †

### ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
```bash
git checkout -b phase4/step5-manual
```

### Step-by-Stepã‚¬ã‚¤ãƒ‰

#### Step 5-1: å‹å®šç¾©ç§»è¡Œ
```bash
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p src/features/manual/model

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼
cp src/types/manuals.ts \
   src/features/manual/model/manual.types.ts

# å…¬é–‹APIä½œæˆ
cat > src/features/manual/index.ts << 'EOF'
// Model (Types)
export type {
  ManualSectionChunk,
  RagMetadata,
  ManualSummary,
  ManualDetail,
  ManualListResponse,
} from './model/manual.types';
EOF

# ãƒ“ãƒ«ãƒ‰ç¢ºèª
npm run build
```

#### Step 5-2: APIã‚µãƒ¼ãƒ“ã‚¹ç§»è¡Œ
```bash
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p src/features/manual/api

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼
cp src/services/api/manualsApi.ts src/features/manual/api/

# ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ä¿®æ­£
# (ã‚¨ãƒ‡ã‚£ã‚¿ã§å®Ÿæ–½)

# å…¬é–‹APIæ›´æ–°
# (ã‚¨ãƒ‡ã‚£ã‚¿ã§å®Ÿæ–½)

# ãƒ“ãƒ«ãƒ‰ç¢ºèª
npm run build
```

#### Step 5-3: ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼æ›´æ–°
```bash
# ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ä¸€æ‹¬ç½®æ›
# @/services/api/manualsApi â†’ @features/manual

# ãƒ“ãƒ«ãƒ‰ç¢ºèª
npm run build
```

#### Step 5-4: å®Œäº†å‡¦ç†
```bash
# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
# (ã‚¨ãƒ‡ã‚£ã‚¿ã§å®Ÿæ–½)

# ã‚³ãƒŸãƒƒãƒˆ
git add src/features/manual docs/phase4/
git commit -m "feat(phase4): complete Step 5 - migrate Manual feature to FSD"
```

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [PHASE4_STEP4_COMPLETION.md](./PHASE4_STEP4_COMPLETION.md) - Databaseç§»è¡Œã®å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ
- [PHASE4_STEP3_COMPLETION.md](./PHASE4_STEP3_COMPLETION.md) - Reportç§»è¡Œã®å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ
- [Feature-Sliced Design](https://feature-sliced.design/) - å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

---

## ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| ã‚¹ãƒ†ãƒƒãƒ— | äºˆæƒ³æ™‚é–“ | é–‹å§‹äºˆå®š | å®Œäº†äºˆå®š |
|---------|---------|---------|---------|
| Step 5-1 | 5åˆ† | 16:30 | 16:35 |
| Step 5-2 | 10åˆ† | 16:35 | 16:45 |
| Step 5-3 | 10åˆ† | 16:45 | 16:55 |
| Step 5-4 | 15åˆ† | 16:55 | 17:10 |
| **åˆè¨ˆ** | **40åˆ†** | **16:30** | **17:10** |

---

## âœï¸ æ‰¿èª

- [ ] ã‚­ãƒƒã‚¯ã‚ªãƒ•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆå®Œäº†
- [ ] å®Ÿæ–½è¨ˆç”»ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†
- [ ] ãƒªã‚¹ã‚¯è©•ä¾¡å®Œäº†
- [ ] å®Ÿè¡Œæº–å‚™å®Œäº†

**ä½œæˆæ—¥**: 2025-01-05  
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: Step 5-1å®Ÿè¡Œ (å‹å®šç¾©ã®ç§»è¡Œ)

---

**Ready to Start! ğŸš€**

Manualæ©Ÿèƒ½ã®ç§»è¡Œã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«æ•°ãŒéå¸¸ã«å°‘ãªãã€ä¾å­˜é–¢ä¿‚ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªãŸã‚ã€æœ€ã‚‚è¿…é€Ÿã«å®Œäº†ã§ãã‚‹è¦‹è¾¼ã¿ã§ã™ã€‚
