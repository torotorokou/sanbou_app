###############################################
# .env.local_dev (ローカル開発: dev ホットリロード)
# - 従来の .env.dev を名称拡張したバリアント
# - .env.dev は後方互換のため残存 (どちらも同内容を維持)
# - 先に .env.common を読み込む想定
###############################################

APP_TAG=local_dev
STAGE=dev
NODE_ENV=development
PUBLIC_BASE_URL=http://localhost:5173

# === Security / Authentication ===
# 開発環境では IAP 無効、DEBUG モード有効
DEBUG=true
IAP_ENABLED=false
IAP_AUDIENCE=

# === DB (開発ローカル) ===
# 【DB ユーザー分離対応】
# POSTGRES_USER / POSTGRES_PASSWORD / DATABASE_URL は secrets/.env.local_dev.secrets に記載してください
# 推奨: sanbou_app_dev ユーザーを使用（scripts/sql/20251204_create_app_db_users.sql 参照）
# 
# 注意: DATABASE_URL はパスワードを含むため、必ず secrets/ ファイルで設定してください
#       ここで設定すると Git にパスワードが記録されます
POSTGRES_DB=sanbou_dev

# === GCP 認証 (ADC) ===
# Application Default Credentials を使用
# ローカル開発では 'gcloud auth application-default login' を実行してください
# GOOGLE_APPLICATION_CREDENTIALS 環境変数は不要です

# === ledger_api 同期 ===
# dev環境ではGit管理されたローカルファイルを使用するため、GCS同期は不要
STARTUP_DOWNLOAD_ENABLE=false
STRICT_STARTUP=false
GCS_LEDGER_BUCKET=
GCS_LEDGER_BUCKET_DEV=gs://sanbouapp-dev/ledger_api/st_app
GCS_LEDGER_BUCKET_STG=gs://sanbouapp-stg/ledger_api/st_app
GCS_LEDGER_BUCKET_PROD=gs://sanbouapp-prod/ledger_api/st_app

# === Dev Port Overrides (optional) ===
DEV_FRONTEND_PORT=5173
DEV_AI_API_PORT=8001
DEV_LEDGER_API_PORT=8002
DEV_CORE_API_PORT=8003
DEV_RAG_API_PORT=8004
DEV_MANUAL_API_PORT=8005

# === Frontend: API Base URL (deprecated) ===
# 注意: フロントエンドでは相対パス /core_api を使用してください
# Vite dev server が /core_api を core_api サービスにプロキシします
# この変数は後方互換のために残していますが、新規コードでは使用しないでください
VITE_API_BASE_URL=/core_api

# === Forecast Worker Settings ===
# 開発環境では短い間隔でポーリング（.env.commonのデフォルトを上書き）
POLL_INTERVAL=3

# === Dev FS Watcher ===
CHOKIDAR_USEPOLLING=true

# === メモ ===
# ・local_dev はホットリロード (Vite/uvicorn) 用
# ・PUBLIC_BASE_URL はフロントエンドの API 呼び先計算で利用想定
# ・内部API URL (RAG_API_BASE等) は .env.common から継承
